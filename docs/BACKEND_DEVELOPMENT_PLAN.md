# β™οΈ MadCamp02: λ°±μ—”λ“ κ°λ° κ³„νμ„

**Ver 1.0 - Backend Development Blueprint**

---

## π“‹ λ©μ°¨

1. [μ‹μ¤ν… κ°μ”](#1-μ‹μ¤ν…-κ°μ”)
2. [μ•„ν‚¤ν…μ² μ„¤κ³„](#2-μ•„ν‚¤ν…μ²-μ„¤κ³„)
3. [κΈ°μ  μ¤νƒ](#3-κΈ°μ -μ¤νƒ)
4. [ν”„λ΅μ νΈ κµ¬μ΅°](#4-ν”„λ΅μ νΈ-κµ¬μ΅°)
5. [λ°μ΄ν„°λ² μ΄μ¤ μ„¤κ³„](#5-λ°μ΄ν„°λ² μ΄μ¤-μ„¤κ³„)
6. [API μƒμ„Έ μ„¤κ³„](#6-api-μƒμ„Έ-μ„¤κ³„)
7. [μΈμ¦ λ° λ³΄μ•](#7-μΈμ¦-λ°-λ³΄μ•)
8. [μ‹¤μ‹κ°„ ν†µμ‹ ](#8-μ‹¤μ‹κ°„-ν†µμ‹ )
9. [μ™Έλ¶€ API μ—°λ™](#9-μ™Έλ¶€-api-μ—°λ™)
10. [λΉ„μ¦λ‹μ¤ λ΅μ§](#10-λΉ„μ¦λ‹μ¤-λ΅μ§)
11. [AI μ„λ²„ μ„¤κ³„](#11-ai-μ„λ²„-μ„¤κ³„)
12. [μΊμ‹± μ „λµ](#12-μΊμ‹±-μ „λµ)
13. [ν…μ¤νΈ μ „λµ](#13-ν…μ¤νΈ-μ „λµ)
14. [λ°°ν¬ λ° μΈν”„λΌ](#14-λ°°ν¬-λ°-μΈν”„λΌ)
15. [κ°λ° λ΅λ“λ§µ](#15-κ°λ°-λ΅λ“λ§µ)

---

## 1. μ‹μ¤ν… κ°μ”

### 1.1 λ°±μ—”λ“ μ—­ν• 

MadCamp02 λ°±μ—”λ“λ” λ‹¤μ ν•µμ‹¬ κΈ°λ¥μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤:

1. **μ‚¬μ©μ κ΄€λ¦¬**: OAuth2 μΈμ¦, JWT ν† ν°, ν”„λ΅ν•„ κ΄€λ¦¬
2. **λ¨μν¬μ μ—”μ§„**: λ§¤μ/λ§¤λ„ νΈλμ­μ…, ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬
3. **μ‹¤μ‹κ°„ λ°μ΄ν„°**: Finnhub WebSocket β†’ Redis β†’ ν΄λΌμ΄μ–ΈνΈ μ¤‘κ³„
4. **κ²μ΄λ―Έν”ΌμΌ€μ΄μ…**: κ°€μ± , λ­ν‚Ή, μΈλ²¤ν† λ¦¬
5. **AI μƒλ‹΄**: μ‚¬μ£Ό κΈ°λ° ν¬μ μ΅°μ–Έ (FastAPI μ—°λ™)

### 1.2 μ„λ²„ κµ¬μ„±

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                       BACKEND SERVERS                            β”‚
β”‚                                                                  β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚
β”‚  β”‚     Spring Boot 3.2          β”‚   β”‚    FastAPI (Python)    β”‚  β”‚
β”‚  β”‚     (Core Server)            β”‚   β”‚    (AI Server)         β”‚  β”‚
β”‚  β”‚                              β”‚   β”‚                        β”‚  β”‚
β”‚  β”‚  β€Ά REST API                  β”‚   β”‚  β€Ά LLM Inference       β”‚  β”‚
β”‚  β”‚  β€Ά WebSocket (STOMP)         β”‚   β”‚  β€Ά Stable Diffusion    β”‚  β”‚
β”‚  β”‚  β€Ά OAuth2 + JWT              β”‚   β”‚  β€Ά SSE Streaming       β”‚  β”‚
β”‚  β”‚  β€Ά Transaction Management    β”‚   β”‚                        β”‚  β”‚
β”‚  β”‚  β€Ά Finnhub Integration       β”‚   β”‚                        β”‚  β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚
β”‚               β”‚                               β”‚                  β”‚
β”‚               β–Ό                               β–Ό                  β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚
β”‚  β”‚  PostgreSQL 16   β”‚  β”‚    Redis 7       β”‚  β”‚  Local GPU    β”‚  β”‚
β”‚  β”‚  (Main DB)       β”‚  β”‚  (Cache/Pub-Sub) β”‚  β”‚  (AI μ²λ¦¬)    β”‚  β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## 2. μ•„ν‚¤ν…μ² μ„¤κ³„

### 2.1 λ μ΄μ–΄λ“ μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                     PRESENTATION LAYER                           β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚  β”‚  Controllers (REST API)                                     β”‚ β”‚
β”‚  β”‚  β”β”€β”€ AuthController                                         β”‚ β”‚
β”‚  β”‚  β”β”€β”€ UserController                                         β”‚ β”‚
β”‚  β”‚  β”β”€β”€ TradeController                                        β”‚ β”‚
β”‚  β”‚  β”β”€β”€ StockController                                        β”‚ β”‚
β”‚  β”‚  β”β”€β”€ GameController                                         β”‚ β”‚
β”‚  β”‚  β”β”€β”€ ChatController                                         β”‚ β”‚
β”‚  β”‚  β””β”€β”€ NotificationController                                 β”‚ β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚  β”‚  WebSocket Handlers (STOMP)                                 β”‚ β”‚
β”‚  β”‚  β”β”€β”€ StockWebSocketHandler                                  β”‚ β”‚
β”‚  β”‚  β”β”€β”€ TradeWebSocketHandler                                  β”‚ β”‚
β”‚  β”‚  β””β”€β”€ NotificationWebSocketHandler                           β”‚ β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                              β”‚
                              β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                      SERVICE LAYER                               β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚  β”‚  Services (Business Logic)                                  β”‚ β”‚
β”‚  β”‚  β”β”€β”€ AuthService                                            β”‚ β”‚
β”‚  β”‚  β”β”€β”€ UserService                                            β”‚ β”‚
β”‚  β”‚  β”β”€β”€ TradeService                                           β”‚ β”‚
β”‚  β”‚  β”β”€β”€ PortfolioService                                       β”‚ β”‚
β”‚  β”‚  β”β”€β”€ StockService                                           β”‚ β”‚
β”‚  β”‚  β”β”€β”€ GachaService                                           β”‚ β”‚
β”‚  β”‚  β”β”€β”€ RankingService                                         β”‚ β”‚
β”‚  β”‚  β”β”€β”€ ChatService                                            β”‚ β”‚
β”‚  β”‚  β”β”€β”€ NotificationService                                    β”‚ β”‚
β”‚  β”‚  β””β”€β”€ SajuService                                            β”‚ β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                              β”‚
                              β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                   INFRASTRUCTURE LAYER                           β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚
β”‚  β”‚  Repositories     β”‚ β”‚  External APIs   β”‚ β”‚  Message Queue β”‚  β”‚
β”‚  β”‚  (JPA)            β”‚ β”‚  (Finnhub, AI)   β”‚ β”‚  (Redis)       β”‚  β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                     β”‚
β”‚  β”‚  Cache Manager    β”‚ β”‚  WebSocket Brokerβ”‚                     β”‚
β”‚  β”‚  (Redis)          β”‚ β”‚  (STOMP)         β”‚                     β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 2.2 λ„λ©”μΈ λ¨λΈ

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚    User      β”‚β”€β”€β”€β”€β–Ίβ”‚   Wallet     β”‚     β”‚  Portfolio   β”‚
β”‚              β”‚     β”‚              β”‚     β”‚  (Holdings)  β”‚
β”‚ - userId     β”‚     β”‚ - cashBalanceβ”‚     β”‚ - ticker     β”‚
β”‚ - email      β”‚     β”‚ - realizedPnLβ”‚     β”‚ - quantity   β”‚
β”‚ - nickname   β”‚     β”‚ - gameCoin   β”‚     β”‚ - avgPrice   β”‚
β”‚ - birthDate  β”‚     β”‚ - totalAssetsβ”‚     β”‚              β”‚
β”‚ - sajuElementβ”‚     β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ - zodiacSign β”‚            β”‚                    β”‚
β”‚ - avatarUrl  β”‚            β–Ό                    β–Ό
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β”‚             β”‚  TradeLogs   β”‚     β”‚  Watchlist   β”‚
       β”‚             β”‚              β”‚     β”‚              β”‚
       β”‚             β”‚ - tradeType  β”‚     β”‚ - ticker     β”‚
       β”‚             β”‚ - price      β”‚     β”‚ - addedAt    β”‚
       β”‚             β”‚ - quantity   β”‚     β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β”‚             β”‚ - realizedPnLβ”‚
       β”‚             β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β”‚
       β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β”‚                                             β”‚
       β–Ό                                             β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Inventory   β”‚β”€β”€β”€β”€β–Ίβ”‚    Item      β”‚     β”‚ ChatHistory  β”‚
β”‚              β”‚     β”‚              β”‚     β”‚              β”‚
β”‚ - isEquipped β”‚     β”‚ - name       β”‚     β”‚ - sessionId  β”‚
β”‚ - acquiredAt β”‚     β”‚ - category   β”‚     β”‚ - messages   β”‚
β”‚              β”‚     β”‚ - rarity     β”‚     β”‚ - sentiment  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     β”‚ - probabilityβ”‚     β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                     β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                            β”‚
                            β–Ό
                     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                     β”‚ Notification β”‚
                     β”‚              β”‚
                     β”‚ - type       β”‚
                     β”‚ - title      β”‚
                     β”‚ - isRead     β”‚
                     β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## 3. κΈ°μ  μ¤νƒ

### 3.1 Core Server (Spring Boot)

| κΈ°μ  | λ²„μ „ | μ©λ„ |
|------|------|------|
| Java | 21 LTS | μ–Έμ–΄ |
| Spring Boot | 3.2.x | ν”„λ μ„μ›ν¬ |
| Spring Security | 6.x | μΈμ¦/μΈκ°€ |
| Spring Data JPA | 3.x | ORM |
| Spring WebSocket | 6.x | μ‹¤μ‹κ°„ ν†µμ‹  |
| Spring Validation | 3.x | μ…λ ¥ κ²€μ¦ |
| Lombok | Latest | λ³΄μΌλ¬ν”λ μ΄νΈ μ κ±° |
| MapStruct | Latest | DTO λ§¤ν•‘ |
| jjwt | 0.12.x | JWT μ²λ¦¬ |
| Lettuce | 6.x | Redis ν΄λΌμ΄μ–ΈνΈ |

### 3.2 AI Server (FastAPI)

| κΈ°μ  | λ²„μ „ | μ©λ„ |
|------|------|------|
| Python | 3.11+ | μ–Έμ–΄ |
| FastAPI | 0.100+ | API ν”„λ μ„μ›ν¬ |
| Uvicorn | Latest | ASGI μ„λ²„ |
| PyTorch | 2.x | AI ν”„λ μ„μ›ν¬ |
| Transformers | Latest | LLM |
| Diffusers | Latest | Stable Diffusion |
| SSE-Starlette | Latest | SSE μ¤νΈλ¦¬λ° |

### 3.3 Database & Cache

| κΈ°μ  | λ²„μ „ | μ©λ„ |
|------|------|------|
| PostgreSQL | 16 | λ©”μΈ DB |
| Redis | 7.x | μΊμ‹/Pub-Sub |

### 3.4 μ™Έλ¶€ API

| API | μ©λ„ |
|-----|------|
| Finnhub | λ―Έκµ­ μ£Όμ‹ μ‹¤μ‹κ°„ λ°μ΄ν„° |
| Google OAuth2 | μ†μ… λ΅κ·ΈμΈ |

---

## 4. ν”„λ΅μ νΈ κµ¬μ΅°

### 4.1 Spring Boot ν”„λ΅μ νΈ κµ¬μ΅°

```
π“ madcamp02-backend/
β”β”€β”€ π“ src/main/java/com/madcamp02/
β”‚   β”‚
β”‚   β”β”€β”€ π“ config/                        # μ„¤μ • ν΄λμ¤
β”‚   β”‚   β”β”€β”€ SecurityConfig.java           # Spring Security μ„¤μ •
β”‚   β”‚   β”β”€β”€ WebSocketConfig.java          # WebSocket/STOMP μ„¤μ •
β”‚   β”‚   β”β”€β”€ RedisConfig.java              # Redis μ„¤μ •
β”‚   β”‚   β”β”€β”€ JpaConfig.java                # JPA μ„¤μ •
β”‚   β”‚   β”β”€β”€ CorsConfig.java               # CORS μ„¤μ •
β”‚   β”‚   β””β”€β”€ SwaggerConfig.java            # API λ¬Έμ„ μ„¤μ •
β”‚   β”‚
β”‚   β”β”€β”€ π“ domain/                        # λ„λ©”μΈ μ—”ν‹°ν‹°
β”‚   β”‚   β”β”€β”€ π“ user/
β”‚   β”‚   β”‚   β”β”€β”€ User.java                 # μ‚¬μ©μ μ—”ν‹°ν‹°
β”‚   β”‚   β”‚   β””β”€β”€ UserRepository.java       # μ‚¬μ©μ λ ν¬μ§€ν† λ¦¬
β”‚   β”‚   β”β”€β”€ π“ wallet/
β”‚   β”‚   β”‚   β”β”€β”€ Wallet.java               # μ§€κ°‘ μ—”ν‹°ν‹°
β”‚   β”‚   β”‚   β””β”€β”€ WalletRepository.java
β”‚   β”‚   β”β”€β”€ π“ portfolio/
β”‚   β”‚   β”‚   β”β”€β”€ Portfolio.java            # ν¬νΈν΄λ¦¬μ¤ μ—”ν‹°ν‹°
β”‚   β”‚   β”‚   β””β”€β”€ PortfolioRepository.java
β”‚   β”‚   β”β”€β”€ π“ trade/
β”‚   β”‚   β”‚   β”β”€β”€ TradeLog.java             # κ±°λ κΈ°λ΅ μ—”ν‹°ν‹°
β”‚   β”‚   β”‚   β””β”€β”€ TradeLogRepository.java
β”‚   β”‚   β”β”€β”€ π“ item/
β”‚   β”‚   β”‚   β”β”€β”€ Item.java                 # μ•„μ΄ν… μ—”ν‹°ν‹°
β”‚   β”‚   β”‚   β”β”€β”€ ItemRepository.java
β”‚   β”‚   β”‚   β”β”€β”€ Inventory.java            # μΈλ²¤ν† λ¦¬ μ—”ν‹°ν‹°
β”‚   β”‚   β”‚   β””β”€β”€ InventoryRepository.java
β”‚   β”‚   β”β”€β”€ π“ chat/
β”‚   β”‚   β”‚   β”β”€β”€ ChatHistory.java          # μ±„ν… κΈ°λ΅ μ—”ν‹°ν‹°
β”‚   β”‚   β”‚   β””β”€β”€ ChatHistoryRepository.java
β”‚   β”‚   β”β”€β”€ π“ watchlist/
β”‚   β”‚   β”‚   β”β”€β”€ Watchlist.java            # κ΄€μ‹¬μΆ…λ© μ—”ν‹°ν‹°
β”‚   β”‚   β”‚   β””β”€β”€ WatchlistRepository.java
β”‚   β”‚   β””β”€β”€ π“ notification/
β”‚   β”‚       β”β”€β”€ Notification.java         # μ•λ¦Ό μ—”ν‹°ν‹°
β”‚   β”‚       β””β”€β”€ NotificationRepository.java
β”‚   β”‚
β”‚   β”β”€β”€ π“ dto/                           # Data Transfer Objects
β”‚   β”‚   β”β”€β”€ π“ request/
β”‚   β”‚   β”‚   β”β”€β”€ LoginRequest.java
β”‚   β”‚   β”‚   β”β”€β”€ OnboardingRequest.java
β”‚   β”‚   β”‚   β”β”€β”€ TradeOrderRequest.java
β”‚   β”‚   β”‚   β”β”€β”€ GachaRequest.java
β”‚   β”‚   β”‚   β””β”€β”€ ChatRequest.java
β”‚   β”‚   β”β”€β”€ π“ response/
β”‚   β”‚   β”‚   β”β”€β”€ AuthResponse.java
β”‚   β”‚   β”‚   β”β”€β”€ UserResponse.java
β”‚   β”‚   β”‚   β”β”€β”€ WalletResponse.java
β”‚   β”‚   β”‚   β”β”€β”€ PortfolioResponse.java
β”‚   β”‚   β”‚   β”β”€β”€ TradeResponse.java
β”‚   β”‚   β”‚   β”β”€β”€ StockQuoteResponse.java
β”‚   β”‚   β”‚   β”β”€β”€ CandleResponse.java
β”‚   β”‚   β”‚   β”β”€β”€ GachaResultResponse.java
β”‚   β”‚   β”‚   β”β”€β”€ RankingResponse.java
β”‚   β”‚   β”‚   β”β”€β”€ DividendResponse.java
β”‚   β”‚   β”‚   β””β”€β”€ NotificationResponse.java
β”‚   β”‚   β””β”€β”€ π“ websocket/
β”‚   β”‚       β”β”€β”€ StockPriceMessage.java
β”‚   β”‚       β”β”€β”€ TradeNotification.java
β”‚   β”‚       β””β”€β”€ RankingUpdate.java
β”‚   β”‚
β”‚   β”β”€β”€ π“ service/                       # λΉ„μ¦λ‹μ¤ λ΅μ§
β”‚   β”‚   β”β”€β”€ AuthService.java              # μΈμ¦ μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ UserService.java              # μ‚¬μ©μ μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ WalletService.java            # μ§€κ°‘ μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ TradeService.java             # κ±°λ μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ PortfolioService.java         # ν¬νΈν΄λ¦¬μ¤ μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ StockService.java             # μ£Όμ‹ μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ GachaService.java             # κ°€μ±  μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ InventoryService.java         # μΈλ²¤ν† λ¦¬ μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ RankingService.java           # λ­ν‚Ή μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ ChatService.java              # AI μƒλ‹΄ μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ NotificationService.java      # μ•λ¦Ό μ„λΉ„μ¤
β”‚   β”‚   β”β”€β”€ SajuService.java              # μ‚¬μ£Ό κ³„μ‚° μ„λΉ„μ¤
β”‚   β”‚   β””β”€β”€ DividendService.java          # λ°°λ‹ΉκΈ κ³„μ‚° μ„λΉ„μ¤
β”‚   β”‚
β”‚   β”β”€β”€ π“ controller/                    # REST μ»¨νΈλ΅¤λ¬
β”‚   β”‚   β”β”€β”€ AuthController.java           # /api/v1/auth/*
β”‚   β”‚   β”β”€β”€ UserController.java           # /api/v1/user/*
β”‚   β”‚   β”β”€β”€ TradeController.java          # /api/v1/trade/*
β”‚   β”‚   β”β”€β”€ StockController.java          # /api/v1/stock/*
β”‚   β”‚   β”β”€β”€ WatchlistController.java      # /api/v1/watchlist/*
β”‚   β”‚   β”β”€β”€ GameController.java           # /api/v1/game/*
β”‚   β”‚   β”β”€β”€ ChatController.java           # /api/v1/chat/*
β”‚   β”‚   β”β”€β”€ CalcController.java           # /api/v1/calc/*
β”‚   β”‚   β””β”€β”€ NotificationController.java   # /api/v1/notifications/*
β”‚   β”‚
β”‚   β”β”€β”€ π“ websocket/                     # WebSocket ν•Έλ“¤λ¬
β”‚   β”‚   β”β”€β”€ StockPriceHandler.java        # μ£Όκ°€ λΈλ΅λ“μΊμ¤νΈ
β”‚   β”‚   β”β”€β”€ TradeHandler.java             # μ²΄κ²° μ•λ¦Ό
β”‚   β”‚   β””β”€β”€ NotificationHandler.java      # κ°μΈ μ•λ¦Ό
β”‚   β”‚
β”‚   β”β”€β”€ π“ external/                      # μ™Έλ¶€ API μ—°λ™
β”‚   β”‚   β”β”€β”€ π“ finnhub/
β”‚   β”‚   β”‚   β”β”€β”€ FinnhubClient.java        # REST ν΄λΌμ΄μ–ΈνΈ
β”‚   β”‚   β”‚   β”β”€β”€ FinnhubWebSocketClient.java # WebSocket ν΄λΌμ΄μ–ΈνΈ
β”‚   β”‚   β”‚   β””β”€β”€ FinnhubProperties.java    # μ„¤μ •
β”‚   β”‚   β””β”€β”€ π“ ai/
β”‚   β”‚       β”β”€β”€ AIClient.java             # FastAPI μ—°λ™
β”‚   β”‚       β””β”€β”€ AIProperties.java         # μ„¤μ •
β”‚   β”‚
β”‚   β”β”€β”€ π“ security/                      # λ³΄μ• κ΄€λ ¨
β”‚   β”‚   β”β”€β”€ JwtTokenProvider.java         # JWT μƒμ„±/κ²€μ¦
β”‚   β”‚   β”β”€β”€ JwtAuthenticationFilter.java  # JWT ν•„ν„°
β”‚   β”‚   β”β”€β”€ OAuth2SuccessHandler.java     # OAuth μ„±κ³µ ν•Έλ“¤λ¬
β”‚   β”‚   β”β”€β”€ CustomUserDetails.java        # μ‚¬μ©μ μƒμ„Έ
β”‚   β”‚   β””β”€β”€ CustomUserDetailsService.java # μ‚¬μ©μ λ΅λ“
β”‚   β”‚
β”‚   β”β”€β”€ π“ exception/                     # μμ™Έ μ²λ¦¬
β”‚   β”‚   β”β”€β”€ GlobalExceptionHandler.java   # μ „μ—­ μμ™Έ ν•Έλ“¤λ¬
β”‚   β”‚   β”β”€β”€ BusinessException.java        # λΉ„μ¦λ‹μ¤ μμ™Έ
β”‚   β”‚   β”β”€β”€ AuthException.java            # μΈμ¦ μμ™Έ
β”‚   β”‚   β”β”€β”€ TradeException.java           # κ±°λ μμ™Έ
β”‚   β”‚   β””β”€β”€ ErrorCode.java                # μ—λ¬ μ½”λ“ enum
β”‚   β”‚
β”‚   β”β”€β”€ π“ util/                          # μ ν‹Έλ¦¬ν‹°
β”‚   β”‚   β”β”€β”€ SajuCalculator.java           # μ‚¬μ£Ό κ³„μ‚°
β”‚   β”‚   β””β”€β”€ DateUtils.java                # λ‚ μ§ μ ν‹Έ
β”‚   β”‚
β”‚   β””β”€β”€ MadCamp02Application.java      # λ©”μΈ ν΄λμ¤
β”‚
β”β”€β”€ π“ src/main/resources/
β”‚   β”β”€β”€ application.yml                   # λ©”μΈ μ„¤μ •
β”‚   β”β”€β”€ application-dev.yml               # κ°λ° μ„¤μ •
β”‚   β”β”€β”€ application-prod.yml              # ν”„λ΅λ•μ… μ„¤μ •
β”‚   β””β”€β”€ π“ db/migration/                  # Flyway λ§μ΄κ·Έλ μ΄μ…
β”‚       β”β”€β”€ V1__init_schema.sql
β”‚       β”β”€β”€ V2__add_items.sql
β”‚       β””β”€β”€ V3__add_notifications.sql
β”‚
β”β”€β”€ π“ src/test/java/com/madcamp02/
β”‚   β”β”€β”€ π“ service/
β”‚   β”‚   β”β”€β”€ TradeServiceTest.java
β”‚   β”‚   β”β”€β”€ GachaServiceTest.java
β”‚   β”‚   β””β”€β”€ SajuServiceTest.java
β”‚   β”β”€β”€ π“ controller/
β”‚   β”‚   β”β”€β”€ AuthControllerTest.java
β”‚   β”‚   β””β”€β”€ TradeControllerTest.java
β”‚   β””β”€β”€ π“ integration/
β”‚       β”β”€β”€ TradeIntegrationTest.java
β”‚       β””β”€β”€ WebSocketIntegrationTest.java
β”‚
β”β”€β”€ build.gradle                          # Gradle λΉλ“
β”β”€β”€ settings.gradle
β”β”€β”€ Dockerfile                            # Docker μ΄λ―Έμ§€
β””β”€β”€ docker-compose.yml                    # κ°λ° ν™κ²½
```

### 4.2 FastAPI ν”„λ΅μ νΈ κµ¬μ΅°

```
π“ madcamp02-ai/
β”β”€β”€ π“ app/
β”‚   β”β”€β”€ main.py                           # FastAPI μ•±
β”‚   β”β”€β”€ π“ api/
β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β”β”€β”€ chat.py                       # /chat/* λΌμ°ν„°
β”‚   β”‚   β””β”€β”€ avatar.py                     # /avatar/* λΌμ°ν„°
β”‚   β”‚
β”‚   β”β”€β”€ π“ services/
β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β”β”€β”€ llm_service.py                # LLM μ¶”λ΅ 
β”‚   β”‚   β”β”€β”€ avatar_service.py             # μ•„λ°”νƒ€ μƒμ„±
β”‚   β”‚   β””β”€β”€ prompt_builder.py             # ν”„λ΅¬ν”„νΈ μƒμ„±
β”‚   β”‚
β”‚   β”β”€β”€ π“ models/
β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β”β”€β”€ chat_request.py               # μ”μ²­ λ¨λΈ
β”‚   β”‚   β””β”€β”€ chat_response.py              # μ‘λ‹µ λ¨λΈ
β”‚   β”‚
β”‚   β””β”€β”€ π“ core/
β”‚       β”β”€β”€ __init__.py
β”‚       β”β”€β”€ config.py                     # μ„¤μ •
β”‚       β””β”€β”€ gpu_manager.py                # GPU κ΄€λ¦¬
β”‚
β”β”€β”€ requirements.txt                      # μμ΅΄μ„±
β”β”€β”€ Dockerfile                            # Docker μ΄λ―Έμ§€
β””β”€β”€ docker-compose.yml                    # κ°λ° ν™κ²½
```

---

## 5. λ°μ΄ν„°λ² μ΄μ¤ μ„¤κ³„

### 5.1 ERD

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                              users                                    β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ PK β”‚ user_id        β”‚ BIGSERIAL                                      β”‚
β”‚    β”‚ email          β”‚ VARCHAR(255) NOT NULL UNIQUE                   β”‚
β”‚    β”‚ nickname       β”‚ VARCHAR(50) NOT NULL                           β”‚
β”‚    β”‚ provider       β”‚ VARCHAR(20) DEFAULT 'GOOGLE'                   β”‚
β”‚    β”‚ birth_date     β”‚ DATE NOT NULL                                  β”‚
β”‚    β”‚ saju_element   β”‚ VARCHAR(10)                                    β”‚
β”‚    β”‚ zodiac_sign    β”‚ VARCHAR(20)                                    β”‚
β”‚    β”‚ avatar_url     β”‚ TEXT                                           β”‚
β”‚    β”‚ created_at     β”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            β”‚
β”‚    β”‚ updated_at     β”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            β”‚
β””β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
           β”‚
           β”‚ 1:1
           β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                              wallet                                   β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ PK β”‚ wallet_id      β”‚ BIGSERIAL                                      β”‚
β”‚ FK β”‚ user_id        β”‚ BIGINT NOT NULL UNIQUE β†’ users(user_id)        β”‚
β”‚    β”‚ cash_balance   β”‚ NUMERIC(19,4) DEFAULT 10000.0000               β”‚
β”‚    β”‚ realized_profitβ”‚ NUMERIC(19,4) DEFAULT 0.0000                   β”‚
β”‚    β”‚ total_assets   β”‚ NUMERIC(19,4) DEFAULT 10000.0000               β”‚
β”‚    β”‚ game_coin      β”‚ INT DEFAULT 0                                  β”‚
β”‚    β”‚ updated_at     β”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            β”‚
β””β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
           β”‚
           β”‚ 1:N
           β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                            portfolio                                  β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ PK β”‚ pf_id          β”‚ BIGSERIAL                                      β”‚
β”‚ FK β”‚ user_id        β”‚ BIGINT NOT NULL β†’ users(user_id)               β”‚
β”‚    β”‚ ticker         β”‚ VARCHAR(10) NOT NULL                           β”‚
β”‚    β”‚ quantity       β”‚ INT NOT NULL CHECK (quantity >= 0)             β”‚
β”‚    β”‚ avg_price      β”‚ NUMERIC(19,4) NOT NULL                         β”‚
β”‚ UQ β”‚ (user_id, ticker)                                               β”‚
β””β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                           trade_logs                                  β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ PK β”‚ log_id         β”‚ BIGSERIAL                                      β”‚
β”‚ FK β”‚ user_id        β”‚ BIGINT NOT NULL β†’ users(user_id)               β”‚
β”‚    β”‚ ticker         β”‚ VARCHAR(10) NOT NULL                           β”‚
β”‚    β”‚ trade_type     β”‚ VARCHAR(4) NOT NULL ('BUY' or 'SELL')          β”‚
β”‚    β”‚ price          β”‚ NUMERIC(19,4) NOT NULL                         β”‚
β”‚    β”‚ quantity       β”‚ INT NOT NULL                                   β”‚
β”‚    β”‚ total_amount   β”‚ NUMERIC(19,4) NOT NULL                         β”‚
β”‚    β”‚ fee            β”‚ NUMERIC(19,4) DEFAULT 0                        β”‚
β”‚    β”‚ realized_pnl   β”‚ NUMERIC(19,4)                                  β”‚
β”‚    β”‚ trade_date     β”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            β”‚
β””β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                             items                                     β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ PK β”‚ item_id        β”‚ BIGSERIAL                                      β”‚
β”‚    β”‚ name           β”‚ VARCHAR(100) NOT NULL                          β”‚
β”‚    β”‚ description    β”‚ TEXT                                           β”‚
β”‚    β”‚ category       β”‚ VARCHAR(20) NOT NULL                           β”‚
β”‚    β”‚ rarity         β”‚ VARCHAR(20) NOT NULL                           β”‚
β”‚    β”‚ probability    β”‚ FLOAT NOT NULL                                 β”‚
β”‚    β”‚ image_url      β”‚ TEXT                                           β”‚
β”‚    β”‚ created_at     β”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            β”‚
β””β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                           inventory                                   β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ PK β”‚ inv_id         β”‚ BIGSERIAL                                      β”‚
β”‚ FK β”‚ user_id        β”‚ BIGINT NOT NULL β†’ users(user_id)               β”‚
β”‚ FK β”‚ item_id        β”‚ BIGINT NOT NULL β†’ items(item_id)               β”‚
β”‚    β”‚ is_equipped    β”‚ BOOLEAN DEFAULT FALSE                          β”‚
β”‚    β”‚ acquired_at    β”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            β”‚
β”‚ UQ β”‚ (user_id, item_id)                                              β”‚
β””β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                          chat_history                                 β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ PK β”‚ chat_id        β”‚ BIGSERIAL                                      β”‚
β”‚ FK β”‚ user_id        β”‚ BIGINT NOT NULL β†’ users(user_id)               β”‚
β”‚    β”‚ session_id     β”‚ UUID NOT NULL                                  β”‚
β”‚    β”‚ messages       β”‚ JSONB NOT NULL                                 β”‚
β”‚    β”‚ sentiment_scoreβ”‚ FLOAT                                          β”‚
β”‚    β”‚ created_at     β”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            β”‚
β””β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                           watchlist                                   β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ PK β”‚ watchlist_id   β”‚ BIGSERIAL                                      β”‚
β”‚ FK β”‚ user_id        β”‚ BIGINT NOT NULL β†’ users(user_id)               β”‚
β”‚    β”‚ ticker         β”‚ VARCHAR(10) NOT NULL                           β”‚
β”‚    β”‚ added_at       β”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            β”‚
β”‚ UQ β”‚ (user_id, ticker)                                               β”‚
β””β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                         notifications                                 β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ PK β”‚ notif_id       β”‚ BIGSERIAL                                      β”‚
β”‚ FK β”‚ user_id        β”‚ BIGINT NOT NULL β†’ users(user_id)               β”‚
β”‚    β”‚ type           β”‚ VARCHAR(30) NOT NULL                           β”‚
β”‚    β”‚ title          β”‚ VARCHAR(200) NOT NULL                          β”‚
β”‚    β”‚ message        β”‚ TEXT                                           β”‚
β”‚    β”‚ is_read        β”‚ BOOLEAN DEFAULT FALSE                          β”‚
β”‚    β”‚ created_at     β”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            β”‚
β””β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 5.2 μΈλ±μ¤ μ „λµ

| ν…μ΄λΈ” | μΈλ±μ¤ | μ©λ„ |
|--------|--------|------|
| users | `idx_users_email` | λ΅κ·ΈμΈ μ΅°ν |
| wallet | `idx_wallet_user` | μ‚¬μ©μλ³„ μ§€κ°‘ |
| portfolio | `idx_portfolio_user` | ν¬νΈν΄λ¦¬μ¤ μ΅°ν |
| portfolio | `idx_portfolio_ticker` | μΆ…λ©λ³„ μ΅°ν |
| trade_logs | `idx_trade_user` | κ±°λ λ‚΄μ—­ |
| trade_logs | `idx_trade_date` | λ‚ μ§λ³„ μ΅°ν |
| chat_history | `idx_chat_gin` | JSONB κ²€μƒ‰ |
| notifications | `idx_notif_unread` | μ•μ½μ€ μ•λ¦Ό |

---

## 6. API μƒμ„Έ μ„¤κ³„

### 6.1 API μ»¨νΈλ΅¤λ¬ μ„¤κ³„

#### AuthController (`/api/v1/auth`)

| λ©”μ„λ“ | κ²½λ΅ | μ„¤λ… | μ”μ²­ DTO | μ‘λ‹µ DTO |
|--------|------|------|---------|---------|
| POST | `/login` | OAuth λ΅κ·ΈμΈ | `LoginRequest` | `AuthResponse` |
| POST | `/refresh` | ν† ν° κ°±μ‹  | `RefreshRequest` | `AuthResponse` |
| POST | `/logout` | λ΅κ·Έμ•„μ›ƒ | - | - |
| GET | `/me` | ν„μ¬ μ‚¬μ©μ | - | `UserResponse` |

#### UserController (`/api/v1/user`)

| λ©”μ„λ“ | κ²½λ΅ | μ„¤λ… | μ”μ²­ DTO | μ‘λ‹µ DTO |
|--------|------|------|---------|---------|
| GET | `/me` | λ‚΄ μ •λ³΄ | - | `UserDetailResponse` |
| PUT | `/me` | μ •λ³΄ μμ • | `UpdateUserRequest` | `UserResponse` |
| POST | `/onboarding` | μ¨λ³΄λ”© | `OnboardingRequest` | `OnboardingResponse` |
| GET | `/wallet` | μ§€κ°‘ μ΅°ν | - | `WalletResponse` |

#### TradeController (`/api/v1/trade`)

| λ©”μ„λ“ | κ²½λ΅ | μ„¤λ… | μ”μ²­ DTO | μ‘λ‹µ DTO |
|--------|------|------|---------|---------|
| POST | `/order` | μ£Όλ¬Έ | `TradeOrderRequest` | `TradeResponse` |
| GET | `/portfolio` | ν¬νΈν΄λ¦¬μ¤ | - | `PortfolioListResponse` |
| GET | `/portfolio/{ticker}` | νΉμ • μΆ…λ© | - | `PortfolioItemResponse` |
| GET | `/history` | κ±°λ λ‚΄μ—­ | Query Params | `TradeHistoryResponse` |

#### StockController (`/api/v1/stock`)

| λ©”μ„λ“ | κ²½λ΅ | μ„¤λ… | μ”μ²­ DTO | μ‘λ‹µ DTO |
|--------|------|------|---------|---------|
| GET | `/quote/{ticker}` | ν„μ¬κ°€ | - | `StockQuoteResponse` |
| GET | `/candles/{ticker}` | μΊ”λ“¤ λ°μ΄ν„° | Query Params | `CandleResponse` |
| GET | `/search` | μΆ…λ© κ²€μƒ‰ | Query Params | `SearchResponse` |
| GET | `/profile/{ticker}` | μΆ…λ© μ •λ³΄ | - | `StockProfileResponse` |

#### WatchlistController (`/api/v1/watchlist`)

| λ©”μ„λ“ | κ²½λ΅ | μ„¤λ… | μ”μ²­ DTO | μ‘λ‹µ DTO |
|--------|------|------|---------|---------|
| GET | `/` | κ΄€μ‹¬μΆ…λ© μ΅°ν | - | `WatchlistResponse` |
| POST | `/` | μ¶”κ°€ | `AddWatchlistRequest` | `WatchlistItemResponse` |
| DELETE | `/{ticker}` | μ‚­μ  | - | - |

#### GameController (`/api/v1/game`)

| λ©”μ„λ“ | κ²½λ΅ | μ„¤λ… | μ”μ²­ DTO | μ‘λ‹µ DTO |
|--------|------|------|---------|---------|
| POST | `/gacha` | κ°€μ±  λ½‘κΈ° | `GachaRequest` | `GachaResultResponse` |
| GET | `/items` | μ•„μ΄ν… λ©λ΅ | - | `ItemListResponse` |
| GET | `/inventory` | μΈλ²¤ν† λ¦¬ | - | `InventoryResponse` |
| PUT | `/equip/{itemId}` | μ¥μ°©/ν•΄μ  | - | `EquipResponse` |
| GET | `/ranking` | λ­ν‚Ή | Query Params | `RankingResponse` |
| POST | `/convert-profit` | μμµβ†’μ½”μΈ | `ConvertRequest` | `ConvertResponse` |

#### CalcController (`/api/v1/calc`)

| λ©”μ„λ“ | κ²½λ΅ | μ„¤λ… | μ”μ²­ DTO | μ‘λ‹µ DTO |
|--------|------|------|---------|---------|
| GET | `/dividend` | λ°°λ‹ΉκΈ κ³„μ‚° | - | `DividendResponse` |
| GET | `/tax` | μ„ΈκΈ κ³„μ‚° | Query Params | `TaxResponse` |

#### ChatController (`/api/v1/chat`)

| λ©”μ„λ“ | κ²½λ΅ | μ„¤λ… | μ”μ²­ DTO | μ‘λ‹µ DTO |
|--------|------|------|---------|---------|
| POST | `/ask` | AI μƒλ‹΄ (SSE) | `ChatRequest` | SSE Stream |
| GET | `/history` | λ€ν™” λ‚΄μ—­ | Query Params | `ChatHistoryResponse` |
| DELETE | `/session/{sessionId}` | μ„Έμ… μ‚­μ  | - | - |

#### NotificationController (`/api/v1/notifications`)

| λ©”μ„λ“ | κ²½λ΅ | μ„¤λ… | μ”μ²­ DTO | μ‘λ‹µ DTO |
|--------|------|------|---------|---------|
| GET | `/` | μ•λ¦Ό λ©λ΅ | Query Params | `NotificationListResponse` |
| PUT | `/{id}/read` | μ½μ μ²λ¦¬ | - | - |
| PUT | `/read-all` | μ „μ²΄ μ½μ | - | - |

### 6.2 DTO μ„¤κ³„

#### Request DTOs

```
π“ dto/request/
β”β”€β”€ LoginRequest
β”‚   β””β”€β”€ provider: String, idToken: String
β”‚
β”β”€β”€ OnboardingRequest
β”‚   β””β”€β”€ nickname: String, birthDate: LocalDate
β”‚
β”β”€β”€ TradeOrderRequest
β”‚   β””β”€β”€ ticker: String, type: TradeType, quantity: Integer, orderType: OrderType
β”‚
β”β”€β”€ GachaRequest
β”‚   β””β”€β”€ count: Integer
β”‚
β”β”€β”€ ChatRequest
β”‚   β””β”€β”€ message: String, sessionId: UUID, context: ChatContext
β”‚
β””β”€β”€ AddWatchlistRequest
    β””β”€β”€ ticker: String
```

#### Response DTOs

```
π“ dto/response/
β”β”€β”€ AuthResponse
β”‚   β””β”€β”€ accessToken, refreshToken, expiresIn, user, isNewUser
β”‚
β”β”€β”€ UserResponse
β”‚   β””β”€β”€ userId, email, nickname, sajuElement, zodiacSign, avatarUrl
β”‚
β”β”€β”€ OnboardingResponse
β”‚   β””β”€β”€ userId, nickname, birthDate, sajuElement, sajuElementKor, 
β”‚       zodiacSign, zodiacSignKor, luckyColor, luckyNumber[], wallet
β”‚
β”β”€β”€ WalletResponse
β”‚   β””β”€β”€ cashBalance, realizedProfit, totalAssets, gameCoin
β”‚
β”β”€β”€ PortfolioResponse
β”‚   β””β”€β”€ holdings[], totalValue, totalProfit, totalProfitPercent
β”‚
β”β”€β”€ TradeResponse
β”‚   β””β”€β”€ orderId, ticker, type, quantity, executedPrice, 
β”‚       totalAmount, fee, executedAt, portfolio, wallet
β”‚
β”β”€β”€ StockQuoteResponse
β”‚   β””β”€β”€ ticker, price, change, changePercent, volume, timestamp
β”‚
β”β”€β”€ CandleResponse
β”‚   β””β”€β”€ ticker, candles[{time, open, high, low, close, volume}]
β”‚
β”β”€β”€ GachaResultResponse
β”‚   β””β”€β”€ results[{itemId, name, category, rarity, imageUrl, isNew}], wallet
β”‚
β”β”€β”€ RankingResponse
β”‚   β””β”€β”€ rankings[{rank, userId, nickname, avatarUrl, profitPercent, items[]}], 
β”‚       totalParticipants
β”‚
β”β”€β”€ DividendResponse
β”‚   β””β”€β”€ portfolio[{ticker, quantity, dividendPerShare, annualDividend, 
β”‚                   dividendYield, exDividendDate}],
β”‚       summary{totalAnnualDividend, withholdingTax, netDividend, avgYield}
β”‚
β””β”€β”€ NotificationResponse
    β””β”€β”€ notifications[{id, type, title, message, isRead, createdAt}], unreadCount
```

---

## 7. μΈμ¦ λ° λ³΄μ•

### 7.1 μΈμ¦ νλ¦„

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”         β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”         β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”         β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ Client  β”‚         β”‚ Google  β”‚         β”‚ Backend β”‚         β”‚   DB    β”‚
β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”         β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”         β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”         β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”
     β”‚                   β”‚                   β”‚                   β”‚
     β”‚ Google Login      β”‚                   β”‚                   β”‚
     β”‚β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚                   β”‚                   β”‚
     β”‚                   β”‚                   β”‚                   β”‚
     β”‚   ID Token        β”‚                   β”‚                   β”‚
     β”‚β—€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚                   β”‚                   β”‚
     β”‚                   β”‚                   β”‚                   β”‚
     β”‚      POST /auth/login (ID Token)      β”‚                   β”‚
     β”‚β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚                   β”‚
     β”‚                   β”‚                   β”‚                   β”‚
     β”‚                   β”‚                   β”‚ Verify Token      β”‚
     β”‚                   β”‚β—€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚                   β”‚
     β”‚                   β”‚                   β”‚                   β”‚
     β”‚                   β”‚   Token Valid     β”‚                   β”‚
     β”‚                   β”‚β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚                   β”‚
     β”‚                   β”‚                   β”‚                   β”‚
     β”‚                   β”‚                   β”‚ Find/Create User  β”‚
     β”‚                   β”‚                   β”‚β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚
     β”‚                   β”‚                   β”‚                   β”‚
     β”‚                   β”‚                   β”‚     User Data     β”‚
     β”‚                   β”‚                   β”‚β—€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚
     β”‚                   β”‚                   β”‚                   β”‚
     β”‚                   β”‚                   β”‚ Generate JWT      β”‚
     β”‚                   β”‚                   β”‚ (Access+Refresh)  β”‚
     β”‚                   β”‚                   β”‚                   β”‚
     β”‚     AuthResponse (Access, Refresh)    β”‚                   β”‚
     β”‚β—€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”‚                   β”‚
     β”‚                   β”‚                   β”‚                   β”‚
```

### 7.2 JWT κµ¬μ΅°

```java
// Access Token Payload
{
  "sub": "1",                    // userId
  "email": "user@gmail.com",
  "nickname": "ν¬μλ„μ‚¬",
  "role": "USER",
  "iat": 1705392000,             // issued at
  "exp": 1705395600              // expires (1h)
}

// Refresh Token Payload
{
  "sub": "1",
  "type": "REFRESH",
  "iat": 1705392000,
  "exp": 1705996800              // expires (7d)
}
```

### 7.3 Security Config

```
SecurityFilterChain μ„¤μ •:
β”β”€β”€ CSRF λΉ„ν™μ„±ν™” (REST API)
β”β”€β”€ μ„Έμ… Stateless
β”β”€β”€ CORS μ„¤μ •
β”β”€β”€ κ³µκ° μ—”λ“ν¬μΈνΈ: /auth/login, /auth/refresh
β”β”€β”€ λ³΄νΈ μ—”λ“ν¬μΈνΈ: λ‚λ¨Έμ§€ μ „μ²΄
β””β”€β”€ JWT ν•„ν„° μ¶”κ°€
```

### 7.4 λ³΄μ• μ²΄ν¬λ¦¬μ¤νΈ

| ν•­λ© | κµ¬ν„ λ°©λ²• |
|------|----------|
| SQL Injection | JPA Prepared Statement |
| XSS | CSP ν—¤λ”, μ…λ ¥ κ²€μ¦ |
| CSRF | Stateless (λΉ„ν™μ„±ν™”) |
| Rate Limiting | Bucket4j λλ” Nginx |
| HTTPS | TLS 1.3 κ°•μ  |
| Password | OAuth2λ§ μ‚¬μ© (μ €μ¥ μ—†μ) |

---

## 8. μ‹¤μ‹κ°„ ν†µμ‹ 

### 8.1 WebSocket μ„¤μ •

```
WebSocketConfig:
β”β”€β”€ STOMP μ—”λ“ν¬μΈνΈ: /ws
β”β”€β”€ SockJS ν΄λ°± ν™μ„±ν™”
β”β”€β”€ Message Broker:
β”‚   β”β”€β”€ /topic/* (λΈλ΅λ“μΊμ¤νΈ)
β”‚   β””β”€β”€ /user/queue/* (κ°μΈ)
β””β”€β”€ Application Destination Prefix: /app
```

### 8.2 μ±„λ„ μ„¤κ³„

| μ±„λ„ | νƒ€μ… | μ„¤λ… | λ©”μ‹μ§€ ν•μ‹ |
|------|------|------|------------|
| `/topic/stock.{ticker}` | Broadcast | μΆ…λ©λ³„ μ‹¤μ‹κ°„ μ‹μ„Έ | `StockPriceMessage` |
| `/user/queue/trade` | User-specific | μ²΄κ²° μ•λ¦Ό | `TradeNotification` |
| `/user/queue/notification` | User-specific | κ°μΈ μ•λ¦Ό | `NotificationMessage` |
| `/topic/ranking` | Broadcast | λ­ν‚Ή λ³€λ™ | `RankingUpdate` |

### 8.3 Finnhub μ—°λ™

```
Finnhub WebSocket Client:
β”β”€β”€ μ—°κ²°: wss://ws.finnhub.io
β”β”€β”€ κµ¬λ…: {"type":"subscribe","symbol":"AAPL"}
β”β”€β”€ μμ‹ : {"data":[{"s":"AAPL","p":198.45,"v":100}],"type":"trade"}
β”β”€β”€ μ²λ¦¬:
β”‚   β”β”€β”€ Redis μΊμ‹ μ—…λ°μ΄νΈ
β”‚   β””β”€β”€ STOMP λΈλ΅μ»¤λ΅ μ „λ‹¬
β””β”€β”€ μ¬μ—°κ²°: μλ™ μ¬μ—°κ²° λ΅μ§
```

### 8.4 λ©”μ‹μ§€ νλ¦„

```
[Finnhub] β”€β”€β”€ WebSocket β”€β”€β”€β–¶ [FinnhubWebSocketClient]
                                      β”‚
                                      β”β”€β”€β–¶ [Redis Cache] stock:{ticker}:price
                                      β”‚
                                      β””β”€β”€β–¶ [Redis Pub/Sub] channel: stock.update
                                                  β”‚
                                                  β–Ό
                                      [StockPriceHandler]
                                                  β”‚
                                                  β–Ό
                                      [STOMP Broker] /topic/stock.{ticker}
                                                  β”‚
                                                  β–Ό
                                      [Subscribed Clients]
```

---

## 9. μ™Έλ¶€ API μ—°λ™

### 9.1 Finnhub API

#### REST API μ‚¬μ©

| μ—”λ“ν¬μΈνΈ | μ©λ„ |
|-----------|------|
| `GET /quote` | ν„μ¬κ°€ μ΅°ν |
| `GET /stock/candle` | μΊ”λ“¤ λ°μ΄ν„° |
| `GET /search` | μΆ…λ© κ²€μƒ‰ |
| `GET /stock/profile2` | νμ‚¬ μ •λ³΄ |
| `GET /stock/metric` | μ¬λ¬΄ μ§€ν‘ |

#### WebSocket μ‚¬μ©

```
κµ¬λ…: {"type":"subscribe","symbol":"AAPL"}
μμ‹ : {"data":[{"s":"AAPL","p":198.45,"t":1705392000000,"v":100}],"type":"trade"}
ν•΄μ : {"type":"unsubscribe","symbol":"AAPL"}
```

### 9.2 AI Server (FastAPI) μ—°λ™

#### μ—”λ“ν¬μΈνΈ

| λ©”μ„λ“ | κ²½λ΅ | μ„¤λ… |
|--------|------|------|
| POST | `/chat/ask` | AI μƒλ‹΄ (SSE) |
| POST | `/avatar/generate` | μ•„λ°”νƒ€ μƒμ„± |

#### μ”μ²­ ν•μ‹

```json
// POST /chat/ask
{
  "message": "ν…μ¬λΌ μ§€κΈ μ‚¬λ„ λ κΉ?",
  "userContext": {
    "sajuElement": "FIRE",
    "zodiacSign": "DRAGON",
    "portfolio": [
      {"ticker": "AAPL", "profitPercent": 5.2}
    ]
  },
  "stockContext": {
    "ticker": "TSLA",
    "price": 282.08,
    "change": -2.92,
    "rsi": 45.3,
    "per": 78.5
  }
}
```

---

## 10. λΉ„μ¦λ‹μ¤ λ΅μ§

### 10.1 λ§¤μ νΈλμ­μ…

```
TradeService.buy():
1. @Transactional μ‹μ‘
2. Redisμ—μ„ ν„μ¬κ°€ μ΅°ν
3. wallet SELECT FOR UPDATE (Row Lock)
4. μ”κ³  ν™•μΈ: cashBalance >= price * quantity
5. wallet.cashBalance μ°¨κ°
6. portfolio UPSERT:
   - κΈ°μ΅΄ λ³΄μ  μ‹: μλ‰ ν•©μ‚°, ν‰λ‹¨κ°€ μ¬κ³„μ‚°
   - μ‹ κ· λ³΄μ  μ‹: INSERT
7. trade_logs INSERT
8. wallet.totalAssets μ¬κ³„μ‚°
9. COMMIT
10. WebSocketμΌλ΅ μ²΄κ²° μ•λ¦Ό μ „μ†΅
11. μ•λ¦Ό μ €μ¥
```

### 10.2 λ§¤λ„ νΈλμ­μ…

```
TradeService.sell():
1. @Transactional μ‹μ‘
2. Redisμ—μ„ ν„μ¬κ°€ μ΅°ν
3. portfolio SELECT FOR UPDATE
4. λ³΄μ  μλ‰ ν™•μΈ: quantity >= μ”μ²­ μλ‰
5. μ‹¤ν„ μ†μµ κ³„μ‚°: (ν„μ¬κ°€ - ν‰λ‹¨κ°€) * μλ‰
6. portfolio μλ‰ μ°¨κ° (0μ΄λ©΄ DELETE)
7. wallet.cashBalance μ¦κ°€
8. wallet.realizedProfit μ¦κ°€ (μ–‘μμΈ κ²½μ°)
9. trade_logs INSERT (realized_pnl ν¬ν•¨)
10. wallet.totalAssets μ¬κ³„μ‚°
11. COMMIT
12. WebSocketμΌλ΅ μ²΄κ²° μ•λ¦Ό μ „μ†΅
13. μ•λ¦Ό μ €μ¥
```

### 10.3 κ°€μ±  λ΅μ§

```
GachaService.spin():
1. wallet μ΅°ν λ° μ½”μΈ ν™•μΈ
2. ν™•λ¥  κΈ°λ° μ•„μ΄ν… μ„ νƒ:
   - Random 0~1 μƒμ„±
   - λ„μ  ν™•λ¥ λ΅ λ“±κΈ‰ κ²°μ •
   - ν•΄λ‹Ή λ“±κΈ‰ λ‚΄ λλ¤ μ•„μ΄ν… μ„ νƒ
3. wallet.gameCoin μ°¨κ°
4. inventoryμ— μ•„μ΄ν… μ¶”κ°€ (μ¤‘λ³µ μ‹ λ¬΄μ‹)
5. κ²°κ³Ό λ°ν™
```

### 10.4 μ‚¬μ£Ό κ³„μ‚°

```
SajuService.calculate():
1. μƒλ…„μ›”μΌμ—μ„ μ—°λ„ μ¶”μ¶
2. μ¤ν–‰ κ³„μ‚°:
   - λμλ¦¬ 4,5 β†’ λ©(Wood)
   - λμλ¦¬ 6,7 β†’ ν™”(Fire)
   - λμλ¦¬ 8,9 β†’ ν† (Earth)
   - λμλ¦¬ 0,1 β†’ κΈ(Gold)
   - λμλ¦¬ 2,3 β†’ μ(Water)
3. λ  κ³„μ‚°:
   - (μ—°λ„ - 4) % 12 β†’ 12κ°„μ§€
4. ν–‰μ΄μ μƒ‰/μ«μ λ§¤ν•‘
5. μƒμƒ/μƒκ·Ή μ›μ† κ³„μ‚°
```

### 10.5 λ°°λ‹ΉκΈ κ³„μ‚°

```
DividendService.calculate():
1. ν¬νΈν΄λ¦¬μ¤ μ΅°ν
2. κ° μΆ…λ©μ— λ€ν•΄:
   - Finnhubμ—μ„ λ°°λ‹Ή μ •λ³΄ μ΅°ν
   - μ—°κ°„ λ°°λ‹ΉκΈ = μλ‰ Γ— μ£Όλ‹Ή λ°°λ‹ΉκΈ
   - λ°°λ‹Ή μμµλ¥  = λ°°λ‹ΉκΈ / ν„μ¬ ν‰κ°€μ•΅
3. ν•©κ³„:
   - μ΄ μ—°κ°„ λ°°λ‹ΉκΈ
   - μ›μ²μ§•μμ„Έ (15%)
   - μ‹¤μλ Ήμ•΅
   - ν‰κ·  μμµλ¥ 
```

### 10.6 λ­ν‚Ή κ³„μ‚°

```
RankingService.getRanking():
1. λ¨λ“  μ‚¬μ©μμ wallet μ΅°ν
2. μ΄ μμµλ¥  κ³„μ‚°:
   - (total_assets - μ΄κΈ°μκΈ) / μ΄κΈ°μκΈ Γ— 100
3. μμµλ¥  κΈ°μ¤€ μ •λ ¬
4. μμ„ λ¶€μ—¬
5. Redis μΊμ‹ μ €μ¥ (TTL: 1λ¶„)
6. μƒμ„ Nλ… λ°ν™
```

---

## 11. AI μ„λ²„ μ„¤κ³„

### 11.1 FastAPI κµ¬μ΅°

```
main.py:
β”β”€β”€ CORS μ„¤μ •
β”β”€β”€ λΌμ°ν„° λ“±λ΅
β””β”€β”€ GPU μ΄κΈ°ν™”

api/chat.py:
β”β”€β”€ POST /chat/ask (SSE)
β”‚   β”β”€β”€ μ‚¬μ©μ μ»¨ν…μ¤νΈ νμ‹±
β”‚   β”β”€β”€ ν”„λ΅¬ν”„νΈ μƒμ„±
β”‚   β”β”€β”€ LLM μ¶”λ΅  (μ¤νΈλ¦¬λ°)
β”‚   β””β”€β”€ SSE μ‘λ‹µ
β””β”€β”€ POST /chat/analyze
    β””β”€β”€ κ°μ • λ¶„μ„

api/avatar.py:
β””β”€β”€ POST /avatar/generate
    β”β”€β”€ ν”„λ΅¬ν”„νΈ μƒμ„±
    β”β”€β”€ Stable Diffusion μ¶”λ΅ 
    β””β”€β”€ μ΄λ―Έμ§€ λ°ν™
```

### 11.2 System Prompt

```
λ‹Ήμ‹ μ€ 50λ…„ κ²½λ ¥μ μ›”μ¤νΈλ¦¬νΈ νΈλ μ΄λ”μ΄μ λ™μ–‘ μ² ν•™μ "μ£Όμ‹ λ„μ‚¬"μ…λ‹λ‹¤.

μ‚¬μ©μ μ •λ³΄:
- μ‚¬μ£Ό μ¤ν–‰: {saju_element}
- λ : {zodiac_sign}
- λ³΄μ  μΆ…λ©: {portfolio}
- κ΄€μ‹¬ μΆ…λ©: {interested_ticker}

κ·μΉ™:
1. λ°λ“μ‹ μ‚¬μ£Όμ™€ μ¤ν–‰μ„ ν¬μ μ΅°μ–Έμ— μ—°κ²°ν•μ„Έμ”.
2. μ‹ λΉ„λ΅­κ³  μ€μ μ μΈ λ§ν¬λ¥Ό μ‚¬μ©ν•μ„Έμ” ("ν—ν—", "μλ„¤", "~ν•κ² κµ¬λ¨Ό").
3. μ‹¤μ  μ¬λ¬΄ λ°μ΄ν„°(PER, PBR, RSI λ“±)λ¥Ό μ–ΈκΈ‰ν•μ„Έμ”.
4. ν¬μλ” λ³ΈμΈ μ±…μ„μ΄λΌλ” λ©΄μ±… μ΅°ν•­μ„ μ•”μ‹ν•μ„Έμ”.
5. λ‹µλ³€μ€ 300μ λ‚΄μ™Έλ΅ κ°„κ²°ν•κ² ν•μ„Έμ”.
```

### 11.3 GPU κ΄€λ¦¬

```
GPU Manager:
β”β”€β”€ λ¨λΈ λ΅λ”© (μ•± μ‹μ‘ μ‹)
β”‚   β”β”€β”€ LLM λ¨λΈ
β”‚   β””β”€β”€ Stable Diffusion λ¨λΈ
β”β”€β”€ μ¶”λ΅  ν κ΄€λ¦¬
β”‚   β””β”€β”€ λ™μ‹ μ”μ²­ μ ν•
β”β”€β”€ λ©”λ¨λ¦¬ κ΄€λ¦¬
β”‚   β””β”€β”€ λ¨λΈ μ–Έλ΅λ“/λ΅λ“
β””β”€β”€ ν—¬μ¤ μ²΄ν¬
```

---

## 12. μΊμ‹± μ „λµ

### 12.1 Redis ν‚¤ κµ¬μ΅°

```
# μ‹¤μ‹κ°„ μ£Όκ°€
stock:{ticker}:price          β†’ "198.45" (String, TTL: 5s)
stock:{ticker}:quote          β†’ {price, change, volume} (Hash, TTL: 5s)

# μ‚¬μ©μ μ„Έμ…
session:{userId}              β†’ JWT Refresh Token (String, TTL: 7d)

# λ­ν‚Ή
ranking:monthly               β†’ [{userId, profit}...] (Sorted Set)
ranking:weekly                β†’ [{userId, profit}...] (Sorted Set)
ranking:cache                 β†’ JSON (String, TTL: 1m)

# κ²€μƒ‰ μΊμ‹
search:{query}                β†’ [results] (String, TTL: 10m)

# Rate Limiting
ratelimit:{ip}                β†’ count (String, TTL: 1m)
```

### 12.2 μΊμ‹± λ€μƒ

| λ€μƒ | μΊμ‹ μ „λµ | TTL |
|------|----------|-----|
| μ‹¤μ‹κ°„ μ£Όκ°€ | Write-through | 5μ΄ |
| λ­ν‚Ή | Read-through | 1λ¶„ |
| μΆ…λ© κ²€μƒ‰ | Read-through | 10λ¶„ |
| νμ‚¬ μ •λ³΄ | Read-through | 1μ‹κ°„ |
| λ°°λ‹Ή μ •λ³΄ | Read-through | 24μ‹κ°„ |

### 12.3 μΊμ‹ λ¬΄ν¨ν™”

```
ν¨ν„΄:
1. κ±°λ μ²΄κ²° μ‹ β†’ λ­ν‚Ή μΊμ‹ λ¬΄ν¨ν™”
2. κ°€μ±  κ²°κ³Ό μ‹ β†’ μΈλ²¤ν† λ¦¬ μΊμ‹ λ¬΄ν¨ν™”
3. μ£Όκ°€ μ—…λ°μ΄νΈ μ‹ β†’ ν•΄λ‹Ή μΆ…λ© μΊμ‹ κ°±μ‹ 
```

---

## 13. ν…μ¤νΈ μ „λµ

### 13.1 ν…μ¤νΈ λ λ²¨

| λ λ²¨ | λ„κµ¬ | μ»¤λ²„λ¦¬μ§€ λ©ν‘ |
|------|------|-------------|
| λ‹¨μ„ ν…μ¤νΈ | JUnit 5, Mockito | 80% |
| ν†µν•© ν…μ¤νΈ | Spring Test, Testcontainers | 60% |
| E2E ν…μ¤νΈ | RestAssured | ν•µμ‹¬ μ‹λ‚λ¦¬μ¤ |
| λ¶€ν• ν…μ¤νΈ | k6, Gatling | 1000 λ™μ‹ μ‚¬μ©μ |

### 13.2 ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

#### λ‹¨μ„ ν…μ¤νΈ

```
TradeServiceTest:
β”β”€β”€ λ§¤μ μ„±κ³µ
β”β”€β”€ λ§¤μ μ‹¤ν¨ (μ”κ³  λ¶€μ΅±)
β”β”€β”€ λ§¤λ„ μ„±κ³µ
β”β”€β”€ λ§¤λ„ μ‹¤ν¨ (μλ‰ λ¶€μ΅±)
β”β”€β”€ ν‰λ‹¨κ°€ κ³„μ‚° μ •ν™•μ„±
β””β”€β”€ μ‹¤ν„ μ†μµ κ³„μ‚° μ •ν™•μ„±

GachaServiceTest:
β”β”€β”€ ν™•λ¥  λ¶„ν¬ κ²€μ¦
β”β”€β”€ μ½”μΈ μ°¨κ° μ •ν™•μ„±
β”β”€β”€ μ¤‘λ³µ μ•„μ΄ν… μ²λ¦¬
β””β”€β”€ μ½”μΈ λ¶€μ΅± μ‹ μμ™Έ

SajuServiceTest:
β”β”€β”€ κ° μ—°λ„λ³„ μ¤ν–‰ κ³„μ‚°
β”β”€β”€ λ  κ³„μ‚°
β””β”€β”€ ν–‰μ΄ μ •λ³΄ λ§¤ν•‘
```

#### ν†µν•© ν…μ¤νΈ

```
TradeIntegrationTest:
β”β”€β”€ λ§¤μ β†’ ν¬νΈν΄λ¦¬μ¤ ν™•μΈ β†’ λ§¤λ„ β†’ μ‹¤ν„ μ†μµ ν™•μΈ
β”β”€β”€ λ™μ‹ λ§¤μ μ”μ²­ (λ™μ‹μ„±)
β””β”€β”€ νΈλμ­μ… λ΅¤λ°± ν™•μΈ

WebSocketIntegrationTest:
β”β”€β”€ μ—°κ²° β†’ κµ¬λ… β†’ λ©”μ‹μ§€ μμ‹ 
β”β”€β”€ μΈμ¦ μ—†μ΄ μ—°κ²° μ‹λ„
β””β”€β”€ μ¬μ—°κ²° λ΅μ§
```

### 13.3 ν…μ¤νΈ λ°μ΄ν„°

```
@TestConfiguration:
β”β”€β”€ ν…μ¤νΈμ© H2 λ°μ΄ν„°λ² μ΄μ¤
β”β”€β”€ ν…μ¤νΈμ© Redis (Embedded)
β”β”€β”€ Mock Finnhub μ„λ²„
β””β”€β”€ ν…μ¤νΈ μ‚¬μ©μ/λ°μ΄ν„° Fixture
```

---

## 14. λ°°ν¬ λ° μΈν”„λΌ

### 14.1 Docker Compose

```yaml
services:
  postgres:
    image: postgres:16
    environment:
      POSTGRES_DB: madcamp02-backend
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  backend:
    build: ./madcamp02-backend
    environment:
      SPRING_PROFILES_ACTIVE: prod
      DB_URL: jdbc:postgresql://postgres:5432/madcamp02-backend
      REDIS_HOST: redis
    ports:
      - "8080:8080"
    depends_on:
      - postgres
      - redis

  ai-server:
    build: ./madcamp02-ai
    runtime: nvidia
    environment:
      CUDA_VISIBLE_DEVICES: "0"
    ports:
      - "8000:8000"

  nginx:
    image: nginx:alpine
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    ports:
      - "80:80"
      - "443:443"
    depends_on:
      - backend
      - ai-server
```

### 14.2 ν™κ²½ λ³€μ

```yaml
# application.yml
spring:
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/madcamp02-backend}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:password}
  
  redis:
    host: ${REDIS_HOST:localhost}
    port: ${REDIS_PORT:6379}

finnhub:
  api-key: ${FINNHUB_API_KEY}
  websocket-url: wss://ws.finnhub.io

jwt:
  secret: ${JWT_SECRET}
  access-expiration: 3600000    # 1μ‹κ°„
  refresh-expiration: 604800000 # 7μΌ

ai:
  server-url: ${AI_SERVER_URL:http://localhost:8000}
```

### 14.3 CI/CD νμ΄ν”„λΌμΈ

```
GitHub Actions:
β”β”€β”€ PR μƒμ„± μ‹
β”‚   β”β”€β”€ μ½”λ“ λ¦°νΈ
β”‚   β”β”€β”€ λ‹¨μ„ ν…μ¤νΈ
β”‚   β””β”€β”€ ν†µν•© ν…μ¤νΈ
β”‚
β”β”€β”€ main λΈλμΉ λ³‘ν•© μ‹
β”‚   β”β”€β”€ Docker μ΄λ―Έμ§€ λΉλ“
β”‚   β”β”€β”€ ECR ν‘Έμ‹
β”‚   β””β”€β”€ ECS λ°°ν¬
β”‚
β””β”€β”€ νƒκ·Έ μƒμ„± μ‹ (λ¦΄λ¦¬μ¤)
    β”β”€β”€ ν”„λ΅λ•μ… λ°°ν¬
    β””β”€β”€ λ¦΄λ¦¬μ¤ λ…ΈνΈ μƒμ„±
```

### 14.4 λ¨λ‹ν„°λ§

| λ„κµ¬ | μ©λ„ |
|------|------|
| Prometheus | λ©”νΈλ¦­ μμ§‘ |
| Grafana | λ€μ‹λ³΄λ“ |
| ELK Stack | λ΅κ·Έ λ¶„μ„ |
| Sentry | μ—λ¬ νΈλν‚Ή |
| PagerDuty | μ•λ¦Ό |

---

## 15. κ°λ° λ΅λ“λ§µ

### Phase 1: ν”„λ΅μ νΈ μ…‹μ—… (Week 1)

| νƒμ¤ν¬ | νμΌ/λ¨λ“ | μ„¤λ… |
|--------|---------|------|
| ν”„λ΅μ νΈ μƒμ„± | Spring Initializr | μμ΅΄μ„± μ„¤μ • |
| Docker ν™κ²½ | `docker-compose.yml` | Postgres, Redis |
| DB μ¤ν‚¤λ§ | `V1__init.sql` | ν…μ΄λΈ” μƒμ„± |
| Entity μ •μ | `domain/*.java` | JPA μ—”ν‹°ν‹° |
| Repository μƒμ„± | `*Repository.java` | λ°μ΄ν„° μ ‘κ·Ό |

### Phase 2: μΈμ¦ μ‹μ¤ν… (Week 1)

| νƒμ¤ν¬ | νμΌ/λ¨λ“ | μ„¤λ… |
|--------|---------|------|
| Security μ„¤μ • | `SecurityConfig.java` | JWT μ„¤μ • |
| JWT Provider | `JwtTokenProvider.java` | ν† ν° μƒμ„±/κ²€μ¦ |
| Auth Controller | `AuthController.java` | λ΅κ·ΈμΈ API |
| OAuth2 μ—°λ™ | `OAuth2SuccessHandler.java` | Google μ—°λ™ |
| μ¨λ³΄λ”© API | `UserController.java` | μ‚¬μ£Ό κ³„μ‚° |

### Phase 3: κ±°λ μ‹μ¤ν… (Week 2)

| νƒμ¤ν¬ | νμΌ/λ¨λ“ | μ„¤λ… |
|--------|---------|------|
| Trade Service | `TradeService.java` | λ§¤μ/λ§¤λ„ λ΅μ§ |
| Portfolio Service | `PortfolioService.java` | ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬ |
| Trade Controller | `TradeController.java` | κ±°λ API |
| νΈλμ­μ… ν…μ¤νΈ | `TradeServiceTest.java` | λ‹¨μ„ ν…μ¤νΈ |

### Phase 4: μ‹¤μ‹κ°„ μ‹μ¤ν… (Week 2)

| νƒμ¤ν¬ | νμΌ/λ¨λ“ | μ„¤λ… |
|--------|---------|------|
| WebSocket μ„¤μ • | `WebSocketConfig.java` | STOMP μ„¤μ • |
| Finnhub Client | `FinnhubWebSocketClient.java` | μ‹μ„Έ μμ‹  |
| Stock Handler | `StockPriceHandler.java` | λΈλ΅λ“μΊμ¤νΈ |
| Redis Pub/Sub | `RedisConfig.java` | μΊμ‹/λ©”μ‹μ§€ |

### Phase 5: μ£Όμ‹ API (Week 3)

| νƒμ¤ν¬ | νμΌ/λ¨λ“ | μ„¤λ… |
|--------|---------|------|
| Stock Service | `StockService.java` | μ‹μ„Έ/μΊ”λ“¤ μ΅°ν |
| Finnhub REST | `FinnhubClient.java` | REST API μ—°λ™ |
| Stock Controller | `StockController.java` | μ£Όμ‹ API |
| Watchlist | `WatchlistController.java` | κ΄€μ‹¬μΆ…λ© |

### Phase 6: κ²μ΄λ―Έν”ΌμΌ€μ΄μ… (Week 3-4)

| νƒμ¤ν¬ | νμΌ/λ¨λ“ | μ„¤λ… |
|--------|---------|------|
| Gacha Service | `GachaService.java` | κ°€μ±  λ΅μ§ |
| Inventory Service | `InventoryService.java` | μΈλ²¤ν† λ¦¬ κ΄€λ¦¬ |
| Ranking Service | `RankingService.java` | λ­ν‚Ή κ³„μ‚° |
| Game Controller | `GameController.java` | κ²μ„ API |
| μ•„μ΄ν… λ°μ΄ν„° | `V2__add_items.sql` | μ΄κΈ° λ°μ΄ν„° |

### Phase 7: AI μ„λ²„ (Week 4)

| νƒμ¤ν¬ | νμΌ/λ¨λ“ | μ„¤λ… |
|--------|---------|------|
| FastAPI μ…‹μ—… | `main.py` | ν”„λ΅μ νΈ μƒμ„± |
| LLM Service | `llm_service.py` | μ¶”λ΅  λ΅μ§ |
| Chat API | `chat.py` | SSE μ¤νΈλ¦¬λ° |
| Chat Controller | `ChatController.java` | Spring μ—°λ™ |

### Phase 8: λ¶€κ°€ κΈ°λ¥ (Week 4-5)

| νƒμ¤ν¬ | νμΌ/λ¨λ“ | μ„¤λ… |
|--------|---------|------|
| Dividend Service | `DividendService.java` | λ°°λ‹Ή κ³„μ‚° |
| Notification | `NotificationService.java` | μ•λ¦Ό μ‹μ¤ν… |
| Calc Controller | `CalcController.java` | κ³„μ‚°κΈ° API |
| Notification Controller | `NotificationController.java` | μ•λ¦Ό API |

### Phase 9: ν…μ¤νΈ λ° μµμ ν™” (Week 5)

| νƒμ¤ν¬ | νμΌ/λ¨λ“ | μ„¤λ… |
|--------|---------|------|
| ν†µν•© ν…μ¤νΈ | `*IntegrationTest.java` | μ‹λ‚λ¦¬μ¤ ν…μ¤νΈ |
| λ¶€ν• ν…μ¤νΈ | k6 μ¤ν¬λ¦½νΈ | μ„±λ¥ κ²€μ¦ |
| μΊμ‹ μµμ ν™” | Redis νλ‹ | μ„±λ¥ κ°μ„  |
| API λ¬Έμ„ | Swagger/OpenAPI | λ¬Έμ„ν™” |

### Phase 10: λ°°ν¬ (Week 5)

| νƒμ¤ν¬ | νμΌ/λ¨λ“ | μ„¤λ… |
|--------|---------|------|
| Dockerfile | `Dockerfile` | μ΄λ―Έμ§€ λΉλ“ |
| CI/CD | GitHub Actions | μλ™ λ°°ν¬ |
| λ¨λ‹ν„°λ§ | Prometheus/Grafana | κ΄€μΈ΅μ„± |
| ν”„λ΅λ•μ… λ°°ν¬ | AWS ECS/EC2 | μµμΆ… λ°°ν¬ |

---

## π“ λ¶€λ΅

### A. μ—λ¬ μ½”λ“

| μ½”λ“ | μ„¤λ… | HTTP μƒνƒ |
|------|------|----------|
| AUTH_001 | ν† ν° λ§λ£ | 401 |
| AUTH_002 | μ ν¨ν•μ§€ μ•μ€ ν† ν° | 401 |
| AUTH_003 | κ¶ν• μ—†μ | 403 |
| TRADE_001 | μ”κ³  λ¶€μ΅± | 400 |
| TRADE_002 | λ³΄μ  μλ‰ λ¶€μ΅± | 400 |
| TRADE_003 | κ±°λ μ‹κ°„ μ™Έ | 400 |
| TRADE_004 | μ ν¨ν•μ§€ μ•μ€ μΆ…λ© | 400 |
| GAME_001 | μ½”μΈ λ¶€μ΅± | 400 |
| GAME_002 | μ΄λ―Έ λ³΄μ ν• μ•„μ΄ν… | 400 |
| USER_001 | μ‚¬μ©μ μ—†μ | 404 |
| SERVER_001 | λ‚΄λ¶€ μ„λ²„ μ¤λ¥ | 500 |

### B. μμ΅΄μ„± (build.gradle)

```groovy
dependencies {
    // Spring Boot
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-security'
    implementation 'org.springframework.boot:spring-boot-starter-websocket'
    implementation 'org.springframework.boot:spring-boot-starter-validation'
    implementation 'org.springframework.boot:spring-boot-starter-data-redis'
    
    // JWT
    implementation 'io.jsonwebtoken:jjwt-api:0.12.5'
    runtimeOnly 'io.jsonwebtoken:jjwt-impl:0.12.5'
    runtimeOnly 'io.jsonwebtoken:jjwt-jackson:0.12.5'
    
    // Database
    runtimeOnly 'org.postgresql:postgresql'
    implementation 'org.flywaydb:flyway-core'
    
    // Utility
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'
    implementation 'org.mapstruct:mapstruct:1.5.5.Final'
    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'
    
    // API Documentation
    implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.3.0'
    
    // Testing
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testImplementation 'org.springframework.security:spring-security-test'
    testImplementation 'org.testcontainers:postgresql'
    testImplementation 'org.testcontainers:junit-jupiter'
}
```

---

**λ¬Έμ„ λ²„μ „:** 1.0  
**μµμΆ… μμ •μΌ:** 2026-01-16  
**μ‘μ„±μ:** MadCamp02 κ°λ°ν€
